<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <meta name="description" content />
    <meta name="author" content />
    <title>NIMC Pre-Enrolment Application Form - {{page_title}}</title>
<!--    <link href="assets/css/external.css" rel="stylesheet">
    <link href="assets/css/style.css" rel="stylesheet"> -->
    <link href="assets/css/custom.css" rel="stylesheet">
<!-- <link href="assets/css/temp.css" rel="stylesheet"> -->

    <link rel="icon" type="image/png" href="assets/images/logo.png" />

    <script data-search-pseudo-elements defer src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.13.0/js/all.min.js" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/feather-icons/4.27.0/feather.min.js"
        crossorigin="anonymous"></script>
    <script src="assets/js/sweetalert.min.js"></script>

</head>
<body >

   <div id="layoutSidenav_content">
                <main>
                    <header class="page-header page-header-dark  pb-10">
                        <div class="container">
                            <div class="page-header-content pt-4">
                                <div class="row align-items-center justify-content-between">
                                    <div class="col-auto">
                                        <img src="assets/images/banner.png" alt="banner" style="width: 95%; " />
                                    </div>
                                </div>
                            </div>
                        </div>
                    </header>
                    <!-- Main page content-->
                    <div class="container-fluid mt-n10">
                        <!-- Wizard card example with navigation-->
                        <div class="card">
                            <div class="card-header border-bottom">
                                <!-- Wizard navigation-->
                                <div class="nav nav-pills nav-justified flex-column flex-xl-row nav-wizard" id="cardTab" role="tablist">
                                    <!-- Wizard navigation item 1-->
                                    <a class="nav-item nav-link active" id="wizard1-tab" href="#wizard1" data-toggle="tab" role="tab" aria-controls="wizard1" aria-selected="true">
                                        <div class="wizard-step-icon">1</div>
                                        <div class="wizard-step-text">
                                            <div class="wizard-step-text-name">Personal Data</div>
                                            <div class="wizard-step-text-details">Basic details and information</div>
                                        </div>
                                    </a>
                                    <!-- Wizard navigation item 2-->
                                    <a class="nav-item nav-link" id="wizard2-tab" href="#wizard2" data-toggle="tab" role="tab" aria-controls="wizard2" aria-selected="true">
                                        <div class="wizard-step-icon">2</div>
                                        <div class="wizard-step-text">
                                            <div class="wizard-step-text-name">Scheduling</div>
                                        </div>
                                    </a>
                                </div>
                            </div>
                            <div class="card-body">

                                <div class="alert alert-success" role="alert">
                                    A success alertâ€”check it out!
                                </div>
                                <div class="tab-content" id="cardTabContent">
                                    <!-- Wizard tab pane item 1-->
                                <div class="tab-pane py-5 py-xl-2 fade show active" id="wizard1" role="tabpanel" aria-labelledby="wizard1-tab">
                                        <div class="row justify-content-center">
                                            <div class="col-xxl-6 col-xl-9">
                                                <form>

                                                    <h5 class="text-primary mb-2 mt-4 "><u>Personal Details</u></h5>
                                                    <div class="form-row">
                                                        <div class="form-group col-md-4">
                                                            <label class="small mb-1" for="inputLastName">Last name <span class="required-fields">*</span></label>
                                                            <input class="form-control" id="inputLastName" type="text" placeholder="Enter your last name"  required/>
                                                        </div>
                                                        <div class="form-group col-md-4">
                                                            <label class="small mb-1" for="inputFirstName">First name <span class="required-fields">*</span></label>
                                                            <input class="form-control" id="inputFirstName" type="text" placeholder="Enter your first name"  required />
                                                        </div>
                                                        <div class="form-group col-md-4">
                                                            <label class="small mb-1" for="inputMIddleName">Middle name</label>
                                                            <input class="form-control" id="inputMIddleName" type="text" placeholder="Enter your middle name"/>
                                                        </div>
                                                    </div>
                                                
                                                    <div class="form-row pt-3">
                                                        <div class="form-group col-md-6 mb-md-0">
                                                            <label class="small mb-1" for="gender">Gender <span class="required-fields">*</span></label>
                                                            <select class="form-control form-control-solid" id="gender" required>
                                                                <option>Select</option>
                                                                <option>Male</option>
                                                                <option>Female</option>
                                                            </select>
                                                        </div>
                                                        <div class="form-group col-md-6 mb-md-0">
                                                            <label class="small mb-1" for="dob">Date of Birth <span class="required-fields">*</span></label>
                                                            <input class="form-control " id="dob" type="date" required />
                                                        </div>
                                                    </div>

                                                    <div class="form-row pt-4">
                                                        <div class="form-group col-md-6 mb-md-0">
                                                            <label class="small mb-1" for="countryOfResidence">Country of Birth <span class="required-fields">*</span></label>
                                                            <select class="form-control form-control-solid" id="countryOfResidence" required>
                                                                <option>Nigeria</option>
                                                                <option>Canada</option>
                                                                <option>United Kingdom</option>
                                                                <option>USA</option>
                                                                <option>Germany</option>
                                                            </select>
                                                        </div>
                                                        <div class="form-group col-md-6 mb-md-0">
                                                               <label class="small mb-1" for="nationality">Nationality <span class="required-fields">*</span></label>
                                                               <input class="form-control" id="nationality" type="text" placeholder="Enter your Nationality"  required/>
                                                        </div>
                                                    </div>

                                                    <h5 class="text-primary mb-2 mt-4 "><u>Address Details</u></h5>

                                                    <div class="form-row">
                                                        <div class="form-group col-md-4 mb-md-0">
                                                            <label class="small mb-1" for="countryOfResidence">Country of Residence <span class="required-fields">*</span></label>
                                                            <select class="form-control form-control-solid" id="countryOfResidence" required>
                                                                <option>Nigeria</option>
                                                                <option>Canada</option>
                                                                <option>United Kingdom</option>
                                                                <option>USA</option>
                                                                <option>Germany</option>
                                                            </select>
                                                        </div>
                                                        <div class="form-group col-md-4 mb-md-0">
                                                            <label class="small mb-1" for="stateOfResidence">State of Residence <span class="required-fields">*</span></label>
                                                            <select class="form-control form-control-solid" id="stateOfResidence" required>
                                                                <option>Enugu</option>
                                                                <option>Imo</option>
                                                                <option>Iowa</option>
                                                                <option>Saskatchwan</option>
                                                                <option>London</option>
                                                                <option>Munchen</option>
                                                            </select>
                                                        </div>
                                                        <div class="form-group col-md-4 mb-md-0">
                                                            <label class="small mb-1" for="lgaOfResidence">LGA of Residence <span class="required-fields">*</span></label>
                                                            <select class="form-control form-control-solid" id="lgaOfResidence" required>
                                                                <option>Igbo-Etiti</option>
                                                                <option>Orlu</option>
                                                                <option>East London</option>
                                                                <option>Wien</option>
                                                                <option>Deutchland</option>
                                                            </select>
                                                        </div>
                                                        
                                                    </div>

                                                     <div class="form-row mt-3">
                                                        <div class="form-group col-md-6 mb-md-0">
                                                               <label class="small mb-1" for="cityOfResidence">City/Town of Residence <span class="required-fields">*</span></label>
                                                               <input class="form-control" id="cityOfResidence" type="text" placeholder="Enter your City of Residence"  required/>
                                                        </div>
                                                        <div class="form-group col-md-6 mb-md-0">
                                                            <label class="small mb-1" for="postalCode">Postal Code</label>
                                                            <input class="form-control" id="postalCode" type="text" placeholder="Enter your Postal Code" />
                                                        </div>
                                                    </div>

                                                    <div class="form-row mt-3">
                                                        <div class="form-group col-md-6 mb-md-0">   
                                                            <label class="small mb-1" for="addressOfResidence1">Address 1 <span class="required-fields">*</span></label>
                                                            <textarea class="form-control " id="addressOfResidence1"   required></textarea>
                                                        </div>
                                                        <div class="form-group col-md-6 mb-md-0">
                                                            <label class="small mb-1" for="addressOfResidence2">Address 2</label>
                                                            <textarea class="form-control " id="addressOfResidence2"   ></textarea>
                                                        </div>                                                        
                                                    </div>

                                                    
                                                    <div class="form-row mt-4">
                                                        <div class="form-group col-md-6 mb-md-0">
                                                            <label class="small mb-1" for="countryOfOrigin">Country of Origin</label>
                                                            <select class="form-control form-control-solid" id="countryOfOrigin" >
                                                                <option>Nigeria</option>
                                                                <option>Canada</option>
                                                                <option>United Kingdom</option>
                                                                <option>USA</option>
                                                                <option>Germany</option>
                                                            </select>
                                                        </div>
                                                        <div class="form-group col-md-6 mb-md-0">
                                                            <label class="small mb-1" for="stateOfOrigin">State of Origin</label>
                                                            <select class="form-control form-control-solid" id="stateOfOrigin" >
                                                                <option>Enugu</option>
                                                                <option>Imo</option>
                                                                <option>Iowa</option>
                                                                <option>Saskatchwan</option>
                                                                <option>London</option>
                                                                <option>Munchen</option>
                                                            </select>
                                                        </div>
                                                        <!-- <div class="form-group col-md-4 mb-md-0">
                                                            <label class="small mb-1" for="lgaOfOrigin">LGA of Origin</label>
                                                            <select class="form-control form-control-solid" id="lgaOfOrigin" required>
                                                                <option>Igbo-Etiti</option>
                                                                <option>Orlu</option>
                                                                <option>East London</option>
                                                                <option>Wien</option>
                                                                <option>Deutchland</option>
                                                            </select>
                                                        </div> -->
                                                        
                                                    </div>


                                                    <h5 class="text-primary mb-2 mt-4 "><u>Other Details</u></h5>

                                                    <div class="form-row mt-2">
                                                        <div class="form-group col-md-4 mb-md-0">
                                                        <label class="small mb-1" for="telephone">Telephone <span class="required-fields">*</span></label>
                                                        <input type="tel" id="telephone" class="form-control" placeholder="08040882123" pattern="^[0-9]*$" required />
                                                       </div>
                                                      
                                                       <div class="form-group col-md-4 mb-md-0">
                                                        <label class="small mb-1" for="email">Email <span class="required-fields">*</span></label>
                                                        <input type="email" id="email" class="form-control" placeholder="Enter Your Email" required />
                                                       </div>

                                                        <div class="form-group col-md-4 mb-md-0">
                                                            <label class="small mb-1" for="height">Height (In Centimeters) <span
                                                                    class="required-fields">*</span></label>
                                                            <div class="input-group flex-nowrap">
                                                                <input type="number" class="form-control" name="height"
                                                                    placeholder="Height" min="0" aria-label="Height"
                                                                    aria-describedby="addon-wrapping" required="true">
                                                                <div class="input-group-append">
                                                                    <span class="input-group-text" id="addon-wrapping">cm</span>
                                                                </div>
                                                            </div>
                                                        </div>
                                                   </div>

                                                   <div class="form-row mt-4">
                                                        <div class="form-group col-md-4">
                                                            <label class="small mb-1" for="pgSurname">Parent/Guardian Surname <span class="required-fields">*</span></label>
                                                            <input class="form-control" id="pgSurname" type="text" placeholder="Enter your last name"  required/>
                                                        </div>
                                                        
                                                        <div class="form-group col-md-4">
                                                            <label class="small mb-1" for="pgFirstName">Parent/Guardian First Name <span class="required-fields">*</span></label>
                                                            <input class="form-control" id="pgFirstName" type="text" placeholder="Enter Parent/Guardian's First name"  required />
                                                        </div>
                                                        

                                                        <div class=" form-group col-md-4 mb-md-0">
                                                                <label class="small mb-1" for="pgnin">Parent/Guardian NIN <span class="required-fields">*</span></label>
                                                                <input class="form-control " id="pgnin" type="text" maxlength="11" size="11" required/>
                                                        </div>
                                                    </div>



                                                    <hr class="my-4" />
                                                    <div class="d-flex justify-content-between">
                                                        <button class="btn btn-light disabled" type="button" disabled>Previous</button>
                                                        <a class="btn btn-primary" href="#wizard2" data-toggle="tab" role="tab" aria-controls="wizard2" aria-selected="true">Next</a>
                                                    </div>
                                                </form>
                                            </div>
                                        </div>
                                </div>
                                    
                                <div class="tab-pane py-5 py-xl-3 fade wizard2" id="wizard2" role="tabpanel"
                                                aria-labelledby="wizard2-tab">
                                                <div class="row justify-content-center">

                                                    <div class="col-xxl-6 col-xl-9">

                                                    <form class="need-validation" novalidate="true" action="/" method="POST">

                                                        <h3 class="text-primary mb-2"><u>Our Partners</u></h3>
                                                        <div>
                                                            <ul id="partnersList"></ul>
                                                        </div>
                                                        <hr class="my-4" />

                                                        <h3 class="text-primary mb-2 "><u>Do You Bank with any of our Partners?</u></h3>
                                                        <div class="form-row mb-4">
                                                            <div class="custom-control custom-radio" style="padding-left: 12.5rem;">
                                                                <input class="custom-control-input" type="radio" name="partnerOptions"
                                                                    id="yes" value="1">
                                                                <label class="custom-control-label" for="yes">Yes</label>
                                                            </div>
                                                            <div class="custom-control custom-radio" style="padding-left: 12.5rem;">
                                                                <input class="custom-control-input" type="radio" name="partnerOptions"
                                                                    id="no" value="2">
                                                                <label class="custom-control-label" for="no">No</label>
                                                            </div>
                                                        </div>

                                                        <div class="toHide" id="partner-1">
                                                            <hr class="my-4">
                                                            <div class="form-row ">
                                                                <div class="form-group col-6">
                                                                    <label class="small mb-1" for="prefPartner">Preferred Partner <span
                                                                            class="required-fields">*</span></label>
                                                                    <select class="form-control form-control-solid" name="prefPartner"
                                                                        id="prefPartner" required="true">
                                                                        <option value="">Select Your Preferred Partner</option>
                                                                    </select>
                                                                </div>
                                                            </div>
                                                        </div>

                                                        <div class="toHide"  id="partner-2">
                                                            <hr class="my-4">
                                                            <div class="form-row mb-3">
                                                                <div class="form-group col-md-6 mb-md-0">
                                                                    <label class="small mb-1" for="prefStateno">Preferred Registration State
                                                                        <span class="required-fields">*</span></label>
                                                                    <select class="form-control form-control-solid" name="prefState"
                                                                        id="prefState" required="true">
                                                                        <option value="">Select Preferred State</option>
                                                                    </select>
                                                                </div>
                                                                <div class="form-group col-md-6 mb-md-0">
                                                                    <label class="small mb-1" for="prefLocationNo">Preferred Registration
                                                                        Location <span class="required-fields">*</span></label>
                                                                    <select class="form-control form-control-solid" name="prefLocation"
                                                                        id="prefLocation" required="true">
                                                                        <option value="">Select Preferred Location</option>
                                                                    </select>
                                                                </div>
                                                            </div>

                                                            <div class="form-row mb-3">
                                                                <div class="form-group col-md-6 mb-md-0">
                                                                    <label class="small mb-1" for="scheduledDate">Date of Appointment <span
                                                                            class="required-fields">*</span></label>
                                                                    <input type="date" class="form-control form-control-solid" 
                                                                        name="scheduledDate" id="scheduledDateNo">
                                                                </div>

                                                                    <div class="form-group col-md-6 mb-md-0">
                                                                        <label class="small mb-1" for="prefTimeSlot">Preferred Time Slot <span class="required-fields">*</span></label>
                                                                        <select class="form-control form-control-solid" name="prefTimeSlot"
                                                                            id="prefTimeSlot" required="true">
                                                                            <option value="">Select Preferred Time</option>
                                                                    
                                                                           
                                                                        </select>
                                                                    </div>
                                                            </div>

                                                        </div>


                                                        <hr class="my-4" />
                                                        <div class="d-flex justify-content-between">
                                                            <a class="btn btn-dark" href="#wizard1" data-toggle="tab" role="tab" aria-controls="wizard2" aria-selected="true">Previous</a>
                                                            <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#submitModal">
                                                              Submit
                                                            </button> 
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                                </form>
                                           </div>
                                       </div>
                                   </div>
                               </div>
                           </div>
                       </div>
                   </div>

                </main>
                <footer class="footer mt-auto footer-light">
                    <div class="container-fluid">
                        <div class="row">
                            <div class="col-md-6 small">Copyright &#xA9; Your Website 2020</div>
                            <div class="col-md-6 text-md-right small">
                                <a href="#!">Privacy Policy</a>
                                &#xB7;
                                <a href="#!">Terms &amp; Conditions</a>
                            </div>
                        </div>
                    </div>
                </footer>

                <!-- Logout Modal-->
              <div class="modal fade" id="submitModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
                <div class="modal-dialog" role="document">
                  <div class="modal-content">
                    <div class="modal-header">
                      <h5 class="modal-title" id="exampleModalLabel">Disclaration</h5>
                      <button class="close" type="button" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">Ã—</span>
                      </button>
                    </div>
                    <div class="modal-body">
                        <div class="mb-2">
                            <b>Please do Ensure that all the details you have filled are accurate</b>
                        </div>
                         <center> 
                            <h2 class="text-primary mb-2 "><u>Declaration/Attestation</u></h2>
                            <p> I certify that the information provided by me on this form is complete, true and accurate. I understand that the information provided by me on this form and my biometrics shall constitute my personal information/data to be entered into the National Identity Database. I consent to sharing of my data provided herein with any organization permitted by the NIMC Act 23 of 2007 and within the Nigerian Law. I hereby apply for a National Identification Number (NIN) and a National Identity (Smart) Card. I accept that this form may be scanned, saved and discarded after use as the Commission may deem fit. I understand and accept that if any information I have provided herein is not correct or is false, the Commission reserves the right of prosecution if discovered.</p>
                            <div class="custom-control custom-checkbox">
                                <input class="custom-control-input" id="agree" type="checkbox">
                                <label class="custom-control-label" for="agree">Yes I Agree</label>
                            </div>
                         </center>

                    </div>
                    <div class="modal-footer">
                      <button class="btn btn-secondary" type="button" data-dismiss="modal">Cancel</button>
                      <button class="btn btn-primary" href="./success_main.html">Submit</button> 
                    </div>
                  </div>
                </div>
              </div>
            </div>
        </div>

<script src="assets/js/jquery-3.5.1.min.js" ></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.bundle.min.js" crossorigin="anonymous"></script>
<script src="assets/js/scripts.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/0.4.1/html2canvas.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/1.3.4/jspdf.debug.js"></script>

<script>
    $(document).ready(() => {
        let trf = window.location.href.split("/").pop() //get the last string in a url
        if(trf == 'child' || trf == 'adult' || trf == 'group-enrolment' ){
            $('.footer').removeClass('ftr')
            $('.footer').addClass('ftr_op')
        }else if(trf == 'select-option' || trf == 'success'){
            $('.footer').html('')
        }else{
            $('.footer').removeClass('ftr_op')
            $('.footer').addClass('ftr')
        }

        $('input[name="agree"]').change(function(){
            if ($(this).is(':checked')) {
                $('.proceedBtn').show().html('<a href="/pre-enrolment/select-option" class="btn btn-primary"><i class="fa fa-check-circle"></i>&nbsp;Click to Proceed</a>')
            }else{
                $('.proceedBtn').hide().html()
            }
        });

        var dtToday = new Date();
        var month = dtToday.getMonth() + 1;
        var day = dtToday.getDate();
        var year = dtToday.getFullYear();
        if (month < 10)
            month = '0' + month.toString();
        if (day < 10)
            day = '0' + day.toString();
        var maxDate = year + '-' + month + '-' + day;
        $('#dob').attr('max', maxDate);
        $('#scheduledDateNo, #scheduledRDateNo').attr('min', maxDate);

        $('select[id=stateOfResidence]').on('change', function () {
            var check = $(this).attr('name').split('_')[0]
            //this condition check if the select change is of a state or not
            if (check == 'state') {
                //this variable get the select split right name and use it to pick the lga to be populated
                var selected = $(this).attr('name').split('_')[1]
                //this get the state id and use it to pull lgas
                let stateid = $(this).val()
                let url = window.location.origin + '/api/get-lgas/' + stateid
                url = url.replace('#', '')
                $.ajax({
                    type: 'GET',
                    url: url,
                    data: {},
                    beforeSend: function () {
                        var elem = document.createElement("img");
                        elem.setAttribute("src", window.location.origin + "/assets/img/loading.gif");
                        document.querySelector(".loading").appendChild(elem);
                    },
                    success: function (response) {
                        var name = 'lga_' + selected;
                        var html = $('select[name=' + name + ']').html()
                        html = html.split('</option>')[0] + '</option>'
                        var len = response.result.data.length;
                        var data = response.result.data
                        for (var i = 0; i < len; i++) {
                            html += '<option value="' + data[i].id + '">' + data[i].name + '</option>'
                        }
                        $('select[name=' + name + ']').html(html)
                    },
                    complete: function () {
                        $('.loading').empty()
                    }
                });
            }
        })

        /**
        **  //Scheduling Section Controls
        **
        **/

        $('#prefPartner').on('change', function () {
            let id = $(this).val()
            if (id != "") {
                let url = window.location.origin + "/api/partner-states?id=" + id
                url = url.replace('#', '')
                $.ajax({
                    type: 'GET',
                    url: url,
                    data: {},
                    beforeSend: function () {
                        var elem = document.createElement("img");
                        elem.setAttribute("src", window.location.origin + "/assets/img/loading.gif");
                        document.querySelector(".loading").appendChild(elem);
                    },
                    success: function (response) {
                        let html = ' <option value="">Preferred Registration State</option>'
                        var len = response.result.data.length;
                        var data = response.result.data
                        for (var i = 0; i < len; i++) {
                            html += '<option value="' + data[i].id + '">' + data[i].name + '</option>'
                        }
                        $('#prefState').html(html)
                        $('#prefState').removeAttr('disabled')
                        $('prefPartner')
                    },
                    complete: function () {
                        $('.loading').empty()
                    }

                });
            } else {
                $('#prefState, #prefLocation, #scheduledDateNo, #prefTimeSlot').attr('disabled', true);
            }
            toggleSubmit()
        })

        $('#no').on('change', function () {
            $('#prefPartner').prop('required', false)
            let url = window.location.origin + "/api/partner-states"
            url = url.replace('#', '')
            $.ajax({
                type: 'GET',
                url: url,
                data: {},
                beforeSend: function () {
                    var elem = document.createElement("img");
                    elem.setAttribute("src", window.location.origin + "/assets/img/loading.gif");
                    document.querySelector(".loading").appendChild(elem);
                },
                success: function (response) {
                    let html = ' <option value="">Preferred Registration State</option>'
                    var len = response.result.data.length;
                    var data = response.result.data
                    $('#interra_id').val(data[0].partner_id)
                    for (var i = 0; i < len; i++) {
                        html += '<option value="' + data[i].id + '">' + data[i].name + '</option>'
                    }
                    $('#prefState').html(html)
                    $('#prefState').removeAttr('disabled')
                    $('#prefLocation, #scheduledDateNo, #prefTimeSlot').attr('disabled', true);

                },
                complete: function () {
                    $('.loading').empty()
                }
            });
        })

        $('#yes').on('change', function () {
            let url = window.location.origin + '/api/partner-list'
            url = url.replace('#', '')
            $.ajax({
                type: 'GET',
                url: url,
                data: {},
                beforeSend: function () {
                    var elem = document.createElement("img");
                    elem.setAttribute("src", window.location.origin + "/assets/img/loading.gif");
                    document.querySelector(".loading").appendChild(elem);
                },
                success: function (response) {
                    let html = ' <option value="">Preferred Partner</option>'
                    var len = response.result.data.length;
                    var data = response.result.data

                    for (var i = 0; i < len; i++) {
                        html += '<option value="' + data[i].id + '">' + data[i].org_name + '</option>'
                    }
                    $('#prefPartner').prop('required', true)
                    $('#prefPartner').html(html)
                    $('#interra_id').val("")
                },
                complete: function () {
                    $('.loading').empty()
                }
            });
        })

        $('#prefState').on('change', function () {
            let id = $(this).val();
            let partner = null;
            if ($('#prefPartner').val() != "" && $('input[name=partnerOptions]:checked').val() == 1) {
                partner = $('#prefPartner').val();
            } else {
                partner = 'Others';
            }
            if (id != "") {
                let url = window.location.origin + '/api/partner-locations/' + id + '/' + partner
                url = url.replace('#', '')
                $.ajax({
                    type: 'GET',
                    url: url,
                    data: {},
                    beforeSend: function () {
                        var elem = document.createElement("img");
                        elem.setAttribute("src", window.location.origin + "/assets/img/loading.gif");
                        document.querySelector(".loading").appendChild(elem);
                    },
                    success: function (response) {
                        let html = ' <option value="">Preferred Registration Location</option>';
                        var len = response.result.data.length;
                        var data = response.result.data;

                        for (var i = 0; i < len; i++) {
                            html += '<option value="' + data[i].location + '">' + data[i].location + '</option>';
                        }
                        $('#prefLocation').html(html);
                        $('#prefLocation').removeAttr('disabled');
                        toggleSubmit();
                    },
                    complete: function () {
                        $('.loading').empty()
                    }
                });
            } else {
                $('#prefLocation').attr('disabled', true);
                $('#scheduledDateNo').attr('disabled', true);
            }
            toggleSubmit();
        })

        $(function () {
            $("[name=partnerOptions]").click(function () {
                $('.toHide').hide();
                let id = $(this).val();
                if (id == 1) {
                    $("#partner-1").show('slow');
                    $('#prefState').attr('disabled', true);
                }
                $('#prefState').html(' <option value="">Preferred Registration State</option>');
                $('#prefLocation').html(' <option value="">Preferred Registration Location</option>');
                $('#prefPartner').html(' <option value="">Preferred Partner</option>');
                $('#prefLocation, #prefTimeSlot, #scheduledDateNo').attr('disabled', true);
                $("#partner-2").show('slow');
                toggleSubmit();
            });
        });

        

        $('#countryOfOrigin,#countryOfResidence, #countryOfBirth').val('Nigeria');

        $('#prefLocation').on('change', function () {
            let id = $(this).val();
            if (id != "") {
                $('#scheduledDateNo, #prefTimeSlot').removeAttr('disabled');
            } else {
                $('#scheduledDateNo, #prefTimeSlot').attr('disabled', true);
            }
            toggleSubmit();
        })

        $('#scheduledDateNo').on('change', function () {
            toggleSubmit();
        })

        $('.close').on('click', () => {
            $('#jqueryresp').removeClass('alertshown')
            $('#jqueryresp').addClass('alerthidding')
        })



        //Get list of all partners
        const getPartners = () => {
            var url = window.location.origin + '/api/partner-list'
            url = url.replace('#', '')
            $.ajax({
                type: 'GET',
                url: url,
                data: {},
                beforeSend: function () {
                    var elem = document.createElement("img");
                    elem.setAttribute("src", window.location.origin + "/assets/img/loading.gif");
                    document.querySelector(".loading").appendChild(elem);
                },
                success: function (response) {
                    let html = ''
                    var len = response.result.data.length;
                    var data = response.result.data

                    for (var i = 0; i < len; i++) {
                        html += '<li>' + data[i].org_name + '</li>'
                    }
                    $('#partnersList').html(html)
                },
                complete: function () {
                    $('.loading').empty()
                }
            });
        }

        if (window.location.href.indexOf("success") < 1 || trf == "reschedule") {
            getPartners()
        }

        $('.move-button').on('click', function () {
            let cview = $(this).attr('current');
            let nview = $(this).attr('move');
            let ctab = cview + '-tab';
            let ntab = nview + '-tab';

            let list = $('#' + cview).find('input[required=true], select[required=true], textarea[required]')

            let len = list.filter(function (e) {
                return $(this).val() == ""
            }).length
            if (len > 0) {
                list.filter(function (e) {
                    return $(this).val() == ""
                }).addClass('is-invalid')

            } else {
                $('.tab-pane').removeClass('show active')
                $('#' + nview).addClass('show active')
                $('#' + ctab).removeClass('active')
                $('#' + ntab).addClass('active')
            }

            list.filter(function (e) {
                return $(this).val() != ""
            }).removeClass('is-invalid')
        });

        $('.nav-item').on('click', function () {
            //the current and next form selector
            let nview = $(this).attr('id').split('-')[0]
            let cview = $('.show').attr('id')

            //the current and next tab selectors
            let ctab = cview + '-tab'
            let ntab = $(this).attr('id')

            //form required field status variables
            let list = $('#' + cview).find('input[required=true], select[required=true], textarea[required]')

            let len = list.filter(function (e) {
                return $(this).val() == ""
            }).length
            if (len > 0) {
                list.filter(function (e) {
                    return $(this).val() == ""
                }).addClass('is-invalid')
                $('.nav-item').removeClass('active')
                $('#' + ctab).addClass('active')
                $('#' + ntab).removeClass('active')
            } else {
                $('.tab-pane').removeClass('show active')
                $('#' + nview).addClass('show active')
                $('#' + ctab).removeClass('active')
                $('#' + ntab).addClass('active')
            }

            list.filter(function (e) {
                return $(this).val() != ""
            }).removeClass('is-invalid')
        });        
           
       $('.validate').blur(function () {
            // alert("one of email or phone exited")
            let email = $('#email').val()
            let phone = $('#telephone').val();
            let url = window.location.origin + '/api/fetch-by-email-phone?email=' + email + '&phone=' + phone
            url = url.replace('#', '')
            if(email != "" && phone!=""){
                $.ajax({
                    type: 'GET',
                    url: url,
                    data: {},
                    beforeSend: function () {
                        var elem = document.createElement("img");
                        elem.setAttribute("src", window.location.origin + "/assets/img/loading.gif");
                        document.querySelector(".loading").appendChild(elem);
                    },
                    success: function (response) {
                        if (response.code == 422) {
                            $('#jqueryresp').css('display', 'none')
                            $('#jqueryresp').css('display', 'flex')
                            $('#jqueryresp > .alert-icon-content').html(response.result.data)
                            $('#email, #telephone').addClass('is-invalid')
                            $('.move-button').attr('disabled', 'disabled')
                        } else {
                            $('#jqueryresp > .alert-icon-content').html('')
                            $('#jqueryresp').css('display', 'flex')
                            $('#jqueryresp').css('display', 'none')
                            $('#email, #telephone').addClass('is-valid')
                            $('#email, #telephone').removeClass('is-invalid')
                            $('.move-button').attr('disabled', false)
                        }
                    },
                    complete: function () {
                        $('.loading').empty()
                    }
                });
            }
            
        })

        $('.cmd').on('click', function () {
            let testDivElement = document.getElementById('printHtml');
            let imgData;
            html2canvas($("#printHtml"), {
                useCORS: true,
                onrendered: function (canvas) {
                    imgData = canvas.toDataURL(
                        'image/png');
                    let doc = new jsPDF({
                        orientation: "landscape"
                    });
                    doc.addImage(imgData, 'PNG', -100, 10);
                    doc.save('Appointment_Slip.pdf');
                    window.open(imgData);
                }
            });
        })

        $('input[name=partnerOption]').change(function () {
            if ($(this).is(':checked')) {
                let x = $(this).val()
                if (x == 1) {
                    $('.toggleGuardian').css('display', 'block')
                    $('#pgSurname, #pgFirstName, #pgnin').prop('required', true)
                } else {
                    $('#pgSurname, #pgFirstName, #pgnin').prop('required', false)
                    $('.toggleGuardian').css('display', 'none')
                }
            }
        });

        
        const getGroupList = () => {
            let url = window.location.origin + "/api/get-group-list"
            url = url.replace('#', '')
            $.ajax({
                type: 'GET',
                url: url,
                data: {},
                beforeSend: function () {
                    var elem = document.createElement("img");
                    elem.setAttribute("src", window.location.origin + "/assets/img/loading.gif");
                    document.querySelector(".loading").appendChild(elem);
                },
                success: function (response) {
                    if(response.code == 200){
                        let html = ' <option value="">Select Your Preferred Group</option>'
                        var len = response.result.data.length;
                        var data = response.result.data
                        for (var i = 0; i < len; i++) {
                            html += '<option value="' + data[i].id + '">' + data[i].org_name + '</option>'
                        }
                        $('#prefGPartner').html(html)
                        $('#prefGPartner').removeAttr('disabled')
                        $('#prefGPartner').prop('required', true);
                    }else{
                        $('#prefGPartner').removeAttr('required')
                        $('#prefGPartner, #prefGState, #prefGLocation').prop('disabled', true)
                    }
                },
                complete: function () {
                    $('.loading').empty()
                }

            });
        }

        if (trf == 'group-enrolment') {
            getGroupList()
        }

        $('#prefGPartner').on('change', function(){
            let id = $(this).val();
            if(id != ""){
                let url = window.location.origin + '/api/available-states/' + id
                url = url.replace('#', '')
                $.ajax({
                    type: 'GET',
                    url: url,
                    data: {},
                    beforeSend: function () {
                        var elem = document.createElement("img");
                        elem.setAttribute("src", window.location.origin + "/assets/img/loading.gif");
                        document.querySelector(".loading").appendChild(elem);
                    },
                    success: function (response) {
                        if(response.code == 200){
                            let html = ' <option value="">Preferred Registration State</option>';
                            var len = response.result.data.length;
                            var data = response.result.data;

                            for (var i = 0; i < len; i++) {
                                html += '<option value="' + data[i].id + '">' + data[i].name + '</option>';
                            }
                            $('#prefGState').html(html);
                            $('#prefGState').removeAttr('disabled');
                            $('#prefGState').prop('required', true);
                        }else{
                            $('#prefGState').removeAttr('required');
                            $('#prefGState,#prefGLocation').prop('disabled', true)
                        }
                        
                    },
                    complete: function () {
                        $('.loading').empty()
                    }   
                })
            } else{
                $('#prefGState').removeAttr('required');
                $('#prefGState,#prefGLocation, #modalSubmit').prop('disabled', true)
            }
        })


        $('#prefGState').on('change', function () {
            let id = $(this).val();
            let partner = $('#prefGPartner').val();
 
            if (id != "") {
                let url = window.location.origin + '/api/partner-locations/' + id + '/' + partner
                url = url.replace('#', '')
                $.ajax({
                    type: 'GET',
                    url: url,
                    data: {},
                    beforeSend: function () {
                        var elem = document.createElement("img");
                        elem.setAttribute("src", window.location.origin + "/assets/img/loading.gif");
                        document.querySelector(".loading").appendChild(elem);
                    },
                    success: function (response) {
                        if(response.code == 200){
                            let html = ' <option value="">Preferred Registration Location</option>';
                            var len = response.result.data.length;
                            var data = response.result.data;

                            for (var i = 0; i < len; i++) {
                                html += '<option value="' + data[i].location + '">' + data[i].location + '</option>';
                            }

                            $('#prefGLocation').html(html);
                            $('#prefGLocation, #modalSubmit').removeAttr('disabled');
                            $('#prefGLocation').prop('required', true);
                        }else{
                            $('#prefGLocation').removeAttr('required');
                            $('#prefGLocation, #modalSubmit').prop('disabled', true)
                        }
                        
                    },
                    complete: function () {
                        $('.loading').empty()
                    }
                });
            }else{
                $('#prefGLocation').removeAttr('required');
                $('#prefGLocation, #modalSubmit').prop('disabled', true)
            }
        })

        $('#prefGLocation').on('change', function(){
            if(this.value == ""){
                $('#modalSubmit').prop('disabled', true)
            }else{
                $('#prefGLocation').removeAttr('disabled');
            }
        })

    });
</script>
    </body>
</html>

